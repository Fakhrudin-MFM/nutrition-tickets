# Создание бизнес-процесса

Талон создается в статусе “Выдан”, далее кассир меняет статус на “Квитирован” при отоваривании получателем талона. Если получатель не успел отоварить талон в течении месяца - то статус талона автоматически меняется на “Истекший”.
Для создания бизнес-процесса для объектов класса «Tickets» необходимо перейти в раздел «Workflows» и выбрать действие «+Workflows»:

![shema](/tutorial/images/new_workflow.png)

Откроется форма создания бизнес-процесса, где необходимо ввести логическое и системное наименование создаваемого процесса и выбрать из списка класс:

![shema](/tutorial/images/create_workflow.png)

## Создание состояния бизнес-процесса
На доступной рабочей панели раздела «Workflows» выбираем действие создания состояния бизнес-процесса «+State»:

![shema](/tutorial/images/new_state_workflow.png)

Открывается форма создания состояния. Заполняем системное,  логическое наименование и, при необходимости, условия состояния бизнес-процесса объекта системы:

![shema](/tutorial/images/create_state_workflow.png)

В данном случае для объектов класса «Tickets» доступны 3 состояния: «Issued by», «Acknowledged», «Expired».

![shema](/tutorial/images/all_state_workflow.png)

## Создание переходов между состояниями бизнес-процесса
После необходимо создать переходы между состояниями бизнес процесса объектов системы. Выбираем действие «+Transition», открывается форма создания перехода. На ней необходимо заполнить:
* системное, логическое наименование перехода
* состояние, в котором находится объект для совершения перехода
* состояние, которое приобретет объект после совершения перехода
* значения, присваиваемые для атрибутов объекта после совершения перехода

![shema](/tutorial/images/create_transition_workflow.png)

При переходе из состояния «Issued by» в «Acknowledged» необходимо проставлять соответствующий статус талона, значение текущей даты для даты квитирования талона и значение текущего пользователя как пользователя, квитировавшего талон:

![shema](/tutorial/images/assignment_transitions_workflow.png)

При переходе из состояния «Acknowledged» в «Expired» необходимо проставлять соответствующий статус талона:

![shema](/tutorial/images/assignment_state_workflow.png)

Таким образом, создан бизнес-процесс выдачи талона получателю:

![shema](/tutorial/images/shems_workflow.png)

## Переопределение формы представления в соответствии с состоянием объекта
Далее можно переопределить атрибутивный состав формы представления Талона в зависимости от его состояния. Для этого необходимо выбрать состояние бизнес-процесса талона (в боковом меню, либо в рабочей области раздела «Workflows») и на рабочей панели выбрать действие «View». Выбираем состояние «Acknowledged», переходим в рабочую область действия «View», после чего отображается конструктор формирования стандартной формы представления объекта:

![shema](/tutorial/images/view_workflow.png)

### Следующая страница: [Готовое приложение и роли](/tutorial/ru/6_done_application.md)  

--------------------------------------------------------------------------  

 #### [Licence](/LICENSE) &ensp;  [Contact us](https://iondv.ru/index.html) &ensp;  [English](/tutorial/en/5_create_workflow.md)    &ensp;   <div><img src="https://mc.iondv.com/watch/local/docs/framework" style="position:absolute; left:-9999px;" height=1 width=1 alt="iondv metrics"></div>        
--------------------------------------------------------------------------  

Copyright (c) 2018 **LLC "ION DV"**.  
All rights reserved. 